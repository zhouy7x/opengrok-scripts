<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>sampleFile - OpenGrok cross reference for /sampleFile</title></head><body>
<script type="text/javascript">/* <![CDATA[ */
function get_sym_list(){return [["Variable","xv",[["char",121],["char_dict",93],["char_dict_path",92],["char_img",137],["char_list",64],["char_list",67],["char_list",68],["char_list_path",63],["char_width",123],["char_width",136],["f",148],["image_path",37],["img",78],["img",82],["img",83],["img",85],["img",90],["img",106],["img_aa",130],["img_aa",141],["img_aa",142],["img_new",87],["img_width",104],["input_img",115],["input_img",116],["input_shape",39],["json_string",58],["mergin",77],["model",59],["model_path",35],["new_height",81],["new_line",105],["new_width",38],["num_line",103],["orig_height",79],["orig_width",79],["output_dir",97],["penalty",111],["penalty",120],["predict",117],["predict",119],["predict_line",112],["predicts",107],["save_path",143],["space",72],["text",108],["text_line",113],["w",110],["w",133],["weight_path",36]]],["Namespace","xn",[["np",27],["pd",28]]],["Function","xf",[["add_mergin",42],["pickleload",51]]]];} /* ]]> */</script><a class="l" name="1" href="#1">1</a><span class="c"># MIT License</span>
<a class="l" name="2" href="#2">2</a><span class="c">#</span>
<a class="l" name="3" href="#3">3</a><span class="c"># Copyright (c) 2017 OsciiArt</span>
<a class="l" name="4" href="#4">4</a><span class="c">#</span>
<a class="l" name="5" href="#5">5</a><span class="c"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<a class="l" name="6" href="#6">6</a><span class="c"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<a class="l" name="7" href="#7">7</a><span class="c"># in the Software without restriction, including without limitation the rights</span>
<a class="l" name="8" href="#8">8</a><span class="c"># to use, copy, modify, merge, publish, distribute, sublicense, <a href="/source/s?path=and/">and</a>/<a href="/source/s?path=and/or">or</a> sell</span>
<a class="l" name="9" href="#9">9</a><span class="c"># copies of the Software, and to permit persons to whom the Software is</span>
<a class="hl" name="10" href="#10">10</a><span class="c"># furnished to do so, subject to the following conditions:</span>
<a class="l" name="11" href="#11">11</a><span class="c">#</span>
<a class="l" name="12" href="#12">12</a><span class="c"># The above copyright notice and this permission notice shall be included in all</span>
<a class="l" name="13" href="#13">13</a><span class="c"># copies or substantial portions of the Software.</span>
<a class="l" name="14" href="#14">14</a><span class="c">#</span>
<a class="l" name="15" href="#15">15</a><span class="c"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<a class="l" name="16" href="#16">16</a><span class="c"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<a class="l" name="17" href="#17">17</a><span class="c"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<a class="l" name="18" href="#18">18</a><span class="c"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<a class="l" name="19" href="#19">19</a><span class="c"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<a class="hl" name="20" href="#20">20</a><span class="c"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<a class="l" name="21" href="#21">21</a><span class="c"># SOFTWARE.</span>
<a class="l" name="22" href="#22">22</a>
<a class="l" name="23" href="#23">23</a><span class="c">#!/<a href="/source/s?path=/usr/">usr</a>/<a href="/source/s?path=/usr/bin/">bin</a>/<a href="/source/s?path=/usr/bin/env">env</a> python</span>
<a class="l" name="24" href="#24">24</a><span class="c"># -*- coding: utf-8 -*-</span>
<a class="l" name="25" href="#25">25</a>
<a class="l" name="26" href="#26">26</a><b>from</b> <a href="/source/s?defs=keras" class="intelliWindow-symbol" data-definition-place="undefined-in-file">keras</a>.<a href="/source/s?defs=models" class="intelliWindow-symbol" data-definition-place="undefined-in-file">models</a> <b>import</b> <a href="/source/s?defs=model_from_json" class="intelliWindow-symbol" data-definition-place="undefined-in-file">model_from_json</a>
<a class="l" name="27" href="#27">27</a><b>import</b> <a href="/source/s?defs=numpy" class="intelliWindow-symbol" data-definition-place="undefined-in-file">numpy</a> <b>as</b> <a class="xn" name="np"/><a href="/source/s?refs=np" class="xn intelliWindow-symbol" data-definition-place="def">np</a>
<a class="l" name="28" href="#28">28</a><b>import</b> <a href="/source/s?defs=pandas" class="intelliWindow-symbol" data-definition-place="undefined-in-file">pandas</a> <b>as</b> <a class="xn" name="pd"/><a href="/source/s?refs=pd" class="xn intelliWindow-symbol" data-definition-place="def">pd</a>
<a class="l" name="29" href="#29">29</a><b>from</b> <a href="/source/s?defs=PIL" class="intelliWindow-symbol" data-definition-place="undefined-in-file">PIL</a> <b>import</b> <a href="/source/s?defs=Image" class="intelliWindow-symbol" data-definition-place="undefined-in-file">Image</a>
<a class="hl" name="30" href="#30">30</a><b>import</b> <a href="/source/s?defs=pickle" class="intelliWindow-symbol" data-definition-place="undefined-in-file">pickle</a>
<a class="l" name="31" href="#31">31</a><b>import</b> <a href="/source/s?defs=os" class="intelliWindow-symbol" data-definition-place="undefined-in-file">os</a>
<a class="l" name="32" href="#32">32</a>
<a class="l" name="33" href="#33">33</a>
<a class="l" name="34" href="#34">34</a><span class="c"># parameters</span>
<a class="l" name="35" href="#35">35</a><a class="xv" name="model_path"/><a href="/source/s?refs=model_path" class="xv intelliWindow-symbol" data-definition-place="def">model_path</a> = <span class="s">&quot;<a href="/source/s?path=model/">model</a>/<a href="/source/s?path=model/model.json">model.json</a>&quot;</span>
<a class="l" name="36" href="#36">36</a><a class="xv" name="weight_path"/><a href="/source/s?refs=weight_path" class="xv intelliWindow-symbol" data-definition-place="def">weight_path</a> = <span class="s">&quot;<a href="/source/s?path=model/">model</a>/<a href="/source/s?path=model/weight.hdf5">weight.hdf5</a>&quot;</span>
<a class="l" name="37" href="#37">37</a><a class="xv" name="image_path"/><a href="/source/s?refs=image_path" class="xv intelliWindow-symbol" data-definition-place="def">image_path</a> = <span class="s">&apos;sample <a href="/source/s?path=images/">images</a>/<a href="/source/s?path=images/original">original</a> images/21 original.png&apos;</span> <span class="c"># put the path of the image that you convert.</span>
<a class="l" name="38" href="#38">38</a><a class="xv" name="new_width"/><a href="/source/s?refs=new_width" class="xv intelliWindow-symbol" data-definition-place="def">new_width</a> = <span class="n">0</span> <span class="c"># adjust the width of the image. the original width is used if new_width = 0.</span>
<a class="l" name="39" href="#39">39</a><a class="xv" name="input_shape"/><a href="/source/s?refs=input_shape" class="xv intelliWindow-symbol" data-definition-place="def">input_shape</a> = [<span class="n">64</span>, <span class="n">64</span>, <span class="n">1</span>]
<a class="hl" name="40" href="#40">40</a>
<a class="l" name="41" href="#41">41</a>
<a class="l" name="42" href="#42">42</a><b>def</b> <a class="xf" name="add_mergin"/><a href="/source/s?refs=add_mergin" class="xf intelliWindow-symbol" data-definition-place="def">add_mergin</a>(<a class="xa" name="img"/><a href="/source/s?refs=img" class="xa intelliWindow-symbol" data-definition-place="def">img</a>, <a class="xa" name="mergin"/><a href="/source/s?refs=mergin" class="xa intelliWindow-symbol" data-definition-place="def">mergin</a>):
<a class="l" name="43" href="#43">43</a>    <b>if</b> <a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>!=<span class="n">0</span>:
<a class="l" name="44" href="#44">44</a>        <a class="d intelliWindow-symbol" href="#img_new" data-definition-place="defined-in-file">img_new</a> = <a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=ones" class="intelliWindow-symbol" data-definition-place="undefined-in-file">ones</a>([<a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">0</span>] + <span class="n">2</span> * <a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>, <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">1</span>] + <span class="n">2</span> * <a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>], <a href="/source/s?defs=dtype" class="intelliWindow-symbol" data-definition-place="undefined-in-file">dtype</a>=<a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=uint8" class="intelliWindow-symbol" data-definition-place="undefined-in-file">uint8</a>) * <span class="n">255</span>
<a class="l" name="45" href="#45">45</a>        <a class="d intelliWindow-symbol" href="#img_new" data-definition-place="defined-in-file">img_new</a>[<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>:-<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>, <a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>:-<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>] = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>
<a class="l" name="46" href="#46">46</a>    <b>else</b>:
<a class="l" name="47" href="#47">47</a>        <a class="d intelliWindow-symbol" href="#img_new" data-definition-place="defined-in-file">img_new</a> = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>
<a class="l" name="48" href="#48">48</a>    <b>return</b> <a class="d intelliWindow-symbol" href="#img_new" data-definition-place="defined-in-file">img_new</a>
<a class="l" name="49" href="#49">49</a>
<a class="hl" name="50" href="#50">50</a>
<a class="l" name="51" href="#51">51</a><b>def</b> <a class="xf" name="pickleload"/><a href="/source/s?refs=pickleload" class="xf intelliWindow-symbol" data-definition-place="def">pickleload</a>(<a class="xa" name="path"/><a href="/source/s?refs=path" class="xa intelliWindow-symbol" data-definition-place="def">path</a>):
<a class="l" name="52" href="#52">52</a>    <b>with</b> <a href="/source/s?defs=open" class="intelliWindow-symbol" data-definition-place="undefined-in-file">open</a>(<a class="d intelliWindow-symbol" href="#path" data-definition-place="defined-in-file">path</a>, <a href="/source/s?defs=mode" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mode</a>=<span class="s">&apos;rb&apos;</span>) <b>as</b> <a class="d intelliWindow-symbol" href="#f" data-definition-place="defined-in-file">f</a>:
<a class="l" name="53" href="#53">53</a>        <a href="/source/s?defs=data" class="intelliWindow-symbol" data-definition-place="undefined-in-file">data</a> = <a href="/source/s?defs=pickle" class="intelliWindow-symbol" data-definition-place="undefined-in-file">pickle</a>.<a href="/source/s?defs=load" class="intelliWindow-symbol" data-definition-place="undefined-in-file">load</a>(<a class="d intelliWindow-symbol" href="#f" data-definition-place="defined-in-file">f</a>)
<a class="l" name="54" href="#54">54</a>    <b>return</b> <a href="/source/s?defs=data" class="intelliWindow-symbol" data-definition-place="undefined-in-file">data</a>
<a class="l" name="55" href="#55">55</a>
<a class="l" name="56" href="#56">56</a>
<a class="l" name="57" href="#57">57</a><span class="c"># load model</span>
<a class="l" name="58" href="#58">58</a><a class="xv" name="json_string"/><a href="/source/s?refs=json_string" class="xv intelliWindow-symbol" data-definition-place="def">json_string</a> = <a href="/source/s?defs=open" class="intelliWindow-symbol" data-definition-place="undefined-in-file">open</a>(<a class="d intelliWindow-symbol" href="#model_path" data-definition-place="defined-in-file">model_path</a>).<a href="/source/s?defs=read" class="intelliWindow-symbol" data-definition-place="undefined-in-file">read</a>()
<a class="l" name="59" href="#59">59</a><a class="xv" name="model"/><a href="/source/s?refs=model" class="xv intelliWindow-symbol" data-definition-place="def">model</a> = <a href="/source/s?defs=model_from_json" class="intelliWindow-symbol" data-definition-place="undefined-in-file">model_from_json</a>(<a class="d intelliWindow-symbol" href="#json_string" data-definition-place="defined-in-file">json_string</a>)
<a class="hl" name="60" href="#60">60</a><a class="d intelliWindow-symbol" href="#model" data-definition-place="defined-in-file">model</a>.<a href="/source/s?defs=load_weights" class="intelliWindow-symbol" data-definition-place="undefined-in-file">load_weights</a>(<a class="d intelliWindow-symbol" href="#weight_path" data-definition-place="defined-in-file">weight_path</a>)
<a class="l" name="61" href="#61">61</a><b>print</b>(<span class="s">&quot;model load done&quot;</span>)
<a class="l" name="62" href="#62">62</a>
<a class="l" name="63" href="#63">63</a><a class="xv" name="char_list_path"/><a href="/source/s?refs=char_list_path" class="xv intelliWindow-symbol" data-definition-place="def">char_list_path</a> = <span class="s">&quot;<a href="/source/s?path=data/">data</a>/<a href="/source/s?path=data/char_list.csv">char_list.csv</a>&quot;</span>
<a class="l" name="64" href="#64">64</a><a class="xv" name="char_list"/><a href="/source/s?refs=char_list" class="xv intelliWindow-symbol" data-definition-place="def">char_list</a> = <a class="d intelliWindow-symbol" href="#pd" data-definition-place="defined-in-file">pd</a>.<a href="/source/s?defs=read_csv" class="intelliWindow-symbol" data-definition-place="undefined-in-file">read_csv</a>(<a class="d intelliWindow-symbol" href="#char_list_path" data-definition-place="defined-in-file">char_list_path</a>, <a href="/source/s?defs=encoding" class="intelliWindow-symbol" data-definition-place="undefined-in-file">encoding</a>=<span class="s">&quot;cp932&quot;</span>)
<a class="l" name="65" href="#65">65</a><b>print</b>(<span class="s">&quot;len(char_list)&quot;</span>, <a href="/source/s?defs=len" class="intelliWindow-symbol" data-definition-place="undefined-in-file">len</a>(<a href="/source/s?defs=char_list" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_list</a>))
<a class="l" name="66" href="#66">66</a><span class="c"># print(char_list.head())</span>
<a class="l" name="67" href="#67">67</a><a class="xv" name="char_list"/><a href="/source/s?refs=char_list" class="xv intelliWindow-symbol" data-definition-place="def">char_list</a> = <a href="/source/s?defs=char_list" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_list</a>[<a href="/source/s?defs=char_list" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_list</a>[<span class="s">&apos;frequency&apos;</span>]&gt;=<span class="n">10</span>]
<a class="l" name="68" href="#68">68</a><a class="xv" name="char_list"/><a href="/source/s?refs=char_list" class="xv intelliWindow-symbol" data-definition-place="def">char_list</a> = <a href="/source/s?defs=char_list" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_list</a>[<span class="s">&apos;char&apos;</span>].<a href="/source/s?defs=as_matrix" class="intelliWindow-symbol" data-definition-place="undefined-in-file">as_matrix</a>()
<a class="l" name="69" href="#69">69</a>
<a class="hl" name="70" href="#70">70</a><b>for</b> <a href="/source/s?defs=k" class="intelliWindow-symbol" data-definition-place="undefined-in-file">k</a>, <a href="/source/s?defs=v" class="intelliWindow-symbol" data-definition-place="undefined-in-file">v</a> <b>in</b> <a href="/source/s?defs=enumerate" class="intelliWindow-symbol" data-definition-place="undefined-in-file">enumerate</a>(<a href="/source/s?defs=char_list" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_list</a>):
<a class="l" name="71" href="#71">71</a>    <b>if</b> <a href="/source/s?defs=v" class="intelliWindow-symbol" data-definition-place="undefined-in-file">v</a>==<span class="s">&quot; &quot;</span>:
<a class="l" name="72" href="#72">72</a>        <a class="xv" name="space"/><a href="/source/s?refs=space" class="xv intelliWindow-symbol" data-definition-place="def">space</a> = <a href="/source/s?defs=k" class="intelliWindow-symbol" data-definition-place="undefined-in-file">k</a>
<a class="l" name="73" href="#73">73</a>        <b>break</b>
<a class="l" name="74" href="#74">74</a><b>print</b>(<span class="s">&quot;class index of 1B space:&quot;</span>, <a class="d intelliWindow-symbol" href="#space" data-definition-place="defined-in-file">space</a>)
<a class="l" name="75" href="#75">75</a>
<a class="l" name="76" href="#76">76</a>
<a class="l" name="77" href="#77">77</a><a class="xv" name="mergin"/><a href="/source/s?refs=mergin" class="xv intelliWindow-symbol" data-definition-place="def">mergin</a> = (<a class="d intelliWindow-symbol" href="#input_shape" data-definition-place="defined-in-file">input_shape</a>[<span class="n">0</span>] - <span class="n">18</span>) // <span class="n">2</span>
<a class="l" name="78" href="#78">78</a><a class="xv" name="img"/><a href="/source/s?refs=img" class="xv intelliWindow-symbol" data-definition-place="def">img</a> = <a href="/source/s?defs=Image" class="intelliWindow-symbol" data-definition-place="undefined-in-file">Image</a>.<a href="/source/s?defs=open" class="intelliWindow-symbol" data-definition-place="undefined-in-file">open</a>(<a class="d intelliWindow-symbol" href="#image_path" data-definition-place="defined-in-file">image_path</a>)
<a class="l" name="79" href="#79">79</a><a class="xv" name="orig_width"/><a href="/source/s?refs=orig_width" class="xv intelliWindow-symbol" data-definition-place="def">orig_width</a>, <a class="xv" name="orig_height"/><a href="/source/s?refs=orig_height" class="xv intelliWindow-symbol" data-definition-place="def">orig_height</a> = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=size" class="intelliWindow-symbol" data-definition-place="undefined-in-file">size</a>
<a class="hl" name="80" href="#80">80</a><b>if</b> <a class="d intelliWindow-symbol" href="#new_width" data-definition-place="defined-in-file">new_width</a>==<span class="n">0</span>: <a class="d intelliWindow-symbol" href="#new_width" data-definition-place="defined-in-file">new_width</a> = <a class="d intelliWindow-symbol" href="#orig_width" data-definition-place="defined-in-file">orig_width</a>
<a class="l" name="81" href="#81">81</a><a class="xv" name="new_height"/><a href="/source/s?refs=new_height" class="xv intelliWindow-symbol" data-definition-place="def">new_height</a> = <a href="/source/s?defs=int" class="intelliWindow-symbol" data-definition-place="undefined-in-file">int</a>(<a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=size" class="intelliWindow-symbol" data-definition-place="undefined-in-file">size</a>[<span class="n">1</span>] * <a class="d intelliWindow-symbol" href="#new_width" data-definition-place="defined-in-file">new_width</a> / <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=size" class="intelliWindow-symbol" data-definition-place="undefined-in-file">size</a>[<span class="n">0</span>])
<a class="l" name="82" href="#82">82</a><a class="xv" name="img"/><a href="/source/s?refs=img" class="xv intelliWindow-symbol" data-definition-place="def">img</a> = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=resize" class="intelliWindow-symbol" data-definition-place="undefined-in-file">resize</a>((<a class="d intelliWindow-symbol" href="#new_width" data-definition-place="defined-in-file">new_width</a>, <a class="d intelliWindow-symbol" href="#new_height" data-definition-place="defined-in-file">new_height</a>), <a href="/source/s?defs=Image" class="intelliWindow-symbol" data-definition-place="undefined-in-file">Image</a>.<a href="/source/s?defs=LANCZOS" class="intelliWindow-symbol" data-definition-place="undefined-in-file">LANCZOS</a>)
<a class="l" name="83" href="#83">83</a><a class="xv" name="img"/><a href="/source/s?refs=img" class="xv intelliWindow-symbol" data-definition-place="def">img</a> = <a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=array" class="intelliWindow-symbol" data-definition-place="undefined-in-file">array</a>(<a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>)
<a class="l" name="84" href="#84">84</a><b>if</b> <a href="/source/s?defs=len" class="intelliWindow-symbol" data-definition-place="undefined-in-file">len</a>(<a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>) == <span class="n">3</span>:
<a class="l" name="85" href="#85">85</a>    <a class="xv" name="img"/><a href="/source/s?refs=img" class="xv intelliWindow-symbol" data-definition-place="def">img</a> = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>[:, :, <span class="n">0</span>]
<a class="l" name="86" href="#86">86</a>
<a class="l" name="87" href="#87">87</a><a class="xv" name="img_new"/><a href="/source/s?refs=img_new" class="xv intelliWindow-symbol" data-definition-place="def">img_new</a> = <a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=ones" class="intelliWindow-symbol" data-definition-place="undefined-in-file">ones</a>([<a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">0</span>]+<span class="n">2</span>*<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>+<span class="n">18</span>, <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">1</span>]+<span class="n">2</span>*<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>+<span class="n">18</span>],
<a class="l" name="88" href="#88">88</a>                  <a href="/source/s?defs=dtype" class="intelliWindow-symbol" data-definition-place="undefined-in-file">dtype</a>=<a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=uint8" class="intelliWindow-symbol" data-definition-place="undefined-in-file">uint8</a>) * <span class="n">255</span>
<a class="l" name="89" href="#89">89</a><a class="d intelliWindow-symbol" href="#img_new" data-definition-place="defined-in-file">img_new</a>[<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>:<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>+<a class="d intelliWindow-symbol" href="#new_height" data-definition-place="defined-in-file">new_height</a>, <a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>:<a href="/source/s?defs=mergin" class="intelliWindow-symbol" data-definition-place="undefined-in-file">mergin</a>+<a class="d intelliWindow-symbol" href="#new_width" data-definition-place="defined-in-file">new_width</a>] = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>
<a class="hl" name="90" href="#90">90</a><a class="xv" name="img"/><a href="/source/s?refs=img" class="xv intelliWindow-symbol" data-definition-place="def">img</a> = (<a class="d intelliWindow-symbol" href="#img_new" data-definition-place="defined-in-file">img_new</a>.<a href="/source/s?defs=astype" class="intelliWindow-symbol" data-definition-place="undefined-in-file">astype</a>(<a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=float32" class="intelliWindow-symbol" data-definition-place="undefined-in-file">float32</a>)) / <span class="n">255</span>
<a class="l" name="91" href="#91">91</a>
<a class="l" name="92" href="#92">92</a><a class="xv" name="char_dict_path"/><a href="/source/s?refs=char_dict_path" class="xv intelliWindow-symbol" data-definition-place="def">char_dict_path</a> = <span class="s">&quot;<a href="/source/s?path=data/">data</a>/<a href="/source/s?path=data/char_dict.pkl">char_dict.pkl</a>&quot;</span>
<a class="l" name="93" href="#93">93</a><a class="xv" name="char_dict"/><a href="/source/s?refs=char_dict" class="xv intelliWindow-symbol" data-definition-place="def">char_dict</a> = <a class="d intelliWindow-symbol" href="#pickleload" data-definition-place="defined-in-file">pickleload</a>(<a class="d intelliWindow-symbol" href="#char_dict_path" data-definition-place="defined-in-file">char_dict_path</a>)
<a class="l" name="94" href="#94">94</a>
<a class="l" name="95" href="#95">95</a><b>print</b>(<span class="s">&quot;len(char_dict)&quot;</span>, <a href="/source/s?defs=len" class="intelliWindow-symbol" data-definition-place="undefined-in-file">len</a>(<a class="d intelliWindow-symbol" href="#char_dict" data-definition-place="defined-in-file">char_dict</a>))
<a class="l" name="96" href="#96">96</a>
<a class="l" name="97" href="#97">97</a><a class="xv" name="output_dir"/><a href="/source/s?refs=output_dir" class="xv intelliWindow-symbol" data-definition-place="def">output_dir</a> = <span class="s">&quot;output/&quot;</span>
<a class="l" name="98" href="#98">98</a><b>if</b> <b>not</b> <a href="/source/s?defs=os" class="intelliWindow-symbol" data-definition-place="undefined-in-file">os</a>.<a class="d intelliWindow-symbol" href="#path" data-definition-place="defined-in-file">path</a>.<a href="/source/s?defs=isdir" class="intelliWindow-symbol" data-definition-place="undefined-in-file">isdir</a>(<a class="d intelliWindow-symbol" href="#output_dir" data-definition-place="defined-in-file">output_dir</a>):
<a class="l" name="99" href="#99">99</a>    <a href="/source/s?defs=os" class="intelliWindow-symbol" data-definition-place="undefined-in-file">os</a>.<a href="/source/s?defs=makedirs" class="intelliWindow-symbol" data-definition-place="undefined-in-file">makedirs</a>(<a class="d intelliWindow-symbol" href="#output_dir" data-definition-place="defined-in-file">output_dir</a>)
<a class="hl" name="100" href="#100">100</a>
<a class="l" name="101" href="#101">101</a><b>for</b> <a href="/source/s?defs=slide" class="intelliWindow-symbol" data-definition-place="undefined-in-file">slide</a> <b>in</b> <a href="/source/s?defs=range" class="intelliWindow-symbol" data-definition-place="undefined-in-file">range</a>(<span class="n">18</span>):
<a class="l" name="102" href="#102">102</a>    <b>print</b>(<span class="s">&quot;converting:&quot;</span>, <a href="/source/s?defs=slide" class="intelliWindow-symbol" data-definition-place="undefined-in-file">slide</a>)
<a class="l" name="103" href="#103">103</a>    <a class="xv" name="num_line"/><a href="/source/s?refs=num_line" class="xv intelliWindow-symbol" data-definition-place="def">num_line</a> = (<a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">0</span>] - <a class="d intelliWindow-symbol" href="#input_shape" data-definition-place="defined-in-file">input_shape</a>[<span class="n">0</span>]) // <span class="n">18</span>
<a class="l" name="104" href="#104">104</a>    <a class="xv" name="img_width"/><a href="/source/s?refs=img_width" class="xv intelliWindow-symbol" data-definition-place="def">img_width</a> = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>.<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">1</span>]
<a class="l" name="105" href="#105">105</a>    <a class="xv" name="new_line"/><a href="/source/s?refs=new_line" class="xv intelliWindow-symbol" data-definition-place="def">new_line</a> = <a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=ones" class="intelliWindow-symbol" data-definition-place="undefined-in-file">ones</a>([<span class="n">1</span>, <a class="d intelliWindow-symbol" href="#img_width" data-definition-place="defined-in-file">img_width</a>])
<a class="l" name="106" href="#106">106</a>    <a class="xv" name="img"/><a href="/source/s?refs=img" class="xv intelliWindow-symbol" data-definition-place="def">img</a> = <a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=concatenate" class="intelliWindow-symbol" data-definition-place="undefined-in-file">concatenate</a>([<a class="d intelliWindow-symbol" href="#new_line" data-definition-place="defined-in-file">new_line</a>, <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>], <a href="/source/s?defs=axis" class="intelliWindow-symbol" data-definition-place="undefined-in-file">axis</a>=<span class="n">0</span>)
<a class="l" name="107" href="#107">107</a>    <a class="xv" name="predicts"/><a href="/source/s?refs=predicts" class="xv intelliWindow-symbol" data-definition-place="def">predicts</a> = []
<a class="l" name="108" href="#108">108</a>    <a class="xv" name="text"/><a href="/source/s?refs=text" class="xv intelliWindow-symbol" data-definition-place="def">text</a> = []
<a class="l" name="109" href="#109">109</a>    <b>for</b> <a href="/source/s?defs=h" class="intelliWindow-symbol" data-definition-place="undefined-in-file">h</a> <b>in</b> <a href="/source/s?defs=range" class="intelliWindow-symbol" data-definition-place="undefined-in-file">range</a>(<a class="d intelliWindow-symbol" href="#num_line" data-definition-place="defined-in-file">num_line</a>):
<a class="hl" name="110" href="#110">110</a>        <a class="xv" name="w"/><a href="/source/s?refs=w" class="xv intelliWindow-symbol" data-definition-place="def">w</a> = <span class="n">0</span>
<a class="l" name="111" href="#111">111</a>        <a class="xv" name="penalty"/><a href="/source/s?refs=penalty" class="xv intelliWindow-symbol" data-definition-place="def">penalty</a> = <span class="n">1</span>
<a class="l" name="112" href="#112">112</a>        <a class="xv" name="predict_line"/><a href="/source/s?refs=predict_line" class="xv intelliWindow-symbol" data-definition-place="def">predict_line</a> = []
<a class="l" name="113" href="#113">113</a>        <a class="xv" name="text_line"/><a href="/source/s?refs=text_line" class="xv intelliWindow-symbol" data-definition-place="def">text_line</a> = <span class="s">&quot;&quot;</span>
<a class="l" name="114" href="#114">114</a>        <b>while</b> <a href="/source/s?defs=w" class="intelliWindow-symbol" data-definition-place="undefined-in-file">w</a> &lt;= <a class="d intelliWindow-symbol" href="#img_width" data-definition-place="defined-in-file">img_width</a> - <a class="d intelliWindow-symbol" href="#input_shape" data-definition-place="defined-in-file">input_shape</a>[<span class="n">1</span>]:
<a class="l" name="115" href="#115">115</a>            <a class="xv" name="input_img"/><a href="/source/s?refs=input_img" class="xv intelliWindow-symbol" data-definition-place="def">input_img</a> = <a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>[<a href="/source/s?defs=h" class="intelliWindow-symbol" data-definition-place="undefined-in-file">h</a>*<span class="n">18</span>:<a href="/source/s?defs=h" class="intelliWindow-symbol" data-definition-place="undefined-in-file">h</a>*<span class="n">18</span>+ <a class="d intelliWindow-symbol" href="#input_shape" data-definition-place="defined-in-file">input_shape</a>[<span class="n">0</span>], <a href="/source/s?defs=w" class="intelliWindow-symbol" data-definition-place="undefined-in-file">w</a>:<a href="/source/s?defs=w" class="intelliWindow-symbol" data-definition-place="undefined-in-file">w</a>+<a class="d intelliWindow-symbol" href="#input_shape" data-definition-place="defined-in-file">input_shape</a>[<span class="n">1</span>]]
<a class="l" name="116" href="#116">116</a>            <a class="xv" name="input_img"/><a href="/source/s?refs=input_img" class="xv intelliWindow-symbol" data-definition-place="def">input_img</a> = <a href="/source/s?defs=input_img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">input_img</a>.<a href="/source/s?defs=reshape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">reshape</a>([<span class="n">1</span>,<a class="d intelliWindow-symbol" href="#input_shape" data-definition-place="defined-in-file">input_shape</a>[<span class="n">0</span>], <a class="d intelliWindow-symbol" href="#input_shape" data-definition-place="defined-in-file">input_shape</a>[<span class="n">1</span>], <span class="n">1</span>])
<a class="l" name="117" href="#117">117</a>            <a class="xv" name="predict"/><a href="/source/s?refs=predict" class="xv intelliWindow-symbol" data-definition-place="def">predict</a> = <a class="d intelliWindow-symbol" href="#model" data-definition-place="defined-in-file">model</a>.<a href="/source/s?defs=predict" class="intelliWindow-symbol" data-definition-place="undefined-in-file">predict</a>(<a href="/source/s?defs=input_img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">input_img</a>)
<a class="l" name="118" href="#118">118</a>            <b>if</b> <a href="/source/s?defs=penalty" class="intelliWindow-symbol" data-definition-place="undefined-in-file">penalty</a>: <a href="/source/s?defs=predict" class="intelliWindow-symbol" data-definition-place="undefined-in-file">predict</a>[<span class="n">0</span>, <a class="d intelliWindow-symbol" href="#space" data-definition-place="defined-in-file">space</a>] = <span class="n">0</span>
<a class="l" name="119" href="#119">119</a>            <a class="xv" name="predict"/><a href="/source/s?refs=predict" class="xv intelliWindow-symbol" data-definition-place="def">predict</a> = <a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=argmax" class="intelliWindow-symbol" data-definition-place="undefined-in-file">argmax</a>(<a href="/source/s?defs=predict" class="intelliWindow-symbol" data-definition-place="undefined-in-file">predict</a>[<span class="n">0</span>])
<a class="hl" name="120" href="#120">120</a>            <a class="xv" name="penalty"/><a href="/source/s?refs=penalty" class="xv intelliWindow-symbol" data-definition-place="def">penalty</a> = (<a href="/source/s?defs=predict" class="intelliWindow-symbol" data-definition-place="undefined-in-file">predict</a>==<a class="d intelliWindow-symbol" href="#space" data-definition-place="defined-in-file">space</a>)
<a class="l" name="121" href="#121">121</a>            <a class="xv" name="char"/><a href="/source/s?refs=char" class="xv intelliWindow-symbol" data-definition-place="def">char</a> = <a href="/source/s?defs=char_list" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_list</a>[<a href="/source/s?defs=predict" class="intelliWindow-symbol" data-definition-place="undefined-in-file">predict</a>]
<a class="l" name="122" href="#122">122</a>            <a class="d intelliWindow-symbol" href="#predict_line" data-definition-place="defined-in-file">predict_line</a>.<a href="/source/s?defs=append" class="intelliWindow-symbol" data-definition-place="undefined-in-file">append</a>(<a class="d intelliWindow-symbol" href="#char" data-definition-place="defined-in-file">char</a>)
<a class="l" name="123" href="#123">123</a>            <a class="xv" name="char_width"/><a href="/source/s?refs=char_width" class="xv intelliWindow-symbol" data-definition-place="def">char_width</a> = <a class="d intelliWindow-symbol" href="#char_dict" data-definition-place="defined-in-file">char_dict</a>[<a class="d intelliWindow-symbol" href="#char" data-definition-place="defined-in-file">char</a>].<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">1</span>]
<a class="l" name="124" href="#124">124</a>            <a href="/source/s?defs=w" class="intelliWindow-symbol" data-definition-place="undefined-in-file">w</a> += <a href="/source/s?defs=char_width" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_width</a>
<a class="l" name="125" href="#125">125</a>            <a class="d intelliWindow-symbol" href="#text_line" data-definition-place="defined-in-file">text_line</a> += <a class="d intelliWindow-symbol" href="#char" data-definition-place="defined-in-file">char</a>
<a class="l" name="126" href="#126">126</a>        <a class="d intelliWindow-symbol" href="#predicts" data-definition-place="defined-in-file">predicts</a>.<a href="/source/s?defs=append" class="intelliWindow-symbol" data-definition-place="undefined-in-file">append</a>(<a class="d intelliWindow-symbol" href="#predict_line" data-definition-place="defined-in-file">predict_line</a>)
<a class="l" name="127" href="#127">127</a>        <a class="d intelliWindow-symbol" href="#text" data-definition-place="defined-in-file">text</a>.<a href="/source/s?defs=append" class="intelliWindow-symbol" data-definition-place="undefined-in-file">append</a>(<a class="d intelliWindow-symbol" href="#text_line" data-definition-place="defined-in-file">text_line</a>+<span class="s">&apos;\r\n&apos;</span>)
<a class="l" name="128" href="#128">128</a>    <span class="c"># print(text)</span>
<a class="l" name="129" href="#129">129</a>
<a class="hl" name="130" href="#130">130</a>    <a class="xv" name="img_aa"/><a href="/source/s?refs=img_aa" class="xv intelliWindow-symbol" data-definition-place="def">img_aa</a> = <a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=ones_like" class="intelliWindow-symbol" data-definition-place="undefined-in-file">ones_like</a>(<a href="/source/s?defs=img" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img</a>, <a href="/source/s?defs=dtype" class="intelliWindow-symbol" data-definition-place="undefined-in-file">dtype</a>=<a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=uint8" class="intelliWindow-symbol" data-definition-place="undefined-in-file">uint8</a>) * <span class="n">0xFF</span>
<a class="l" name="131" href="#131">131</a>
<a class="l" name="132" href="#132">132</a>    <b>for</b> <a href="/source/s?defs=h" class="intelliWindow-symbol" data-definition-place="undefined-in-file">h</a> <b>in</b> <a href="/source/s?defs=range" class="intelliWindow-symbol" data-definition-place="undefined-in-file">range</a>(<a class="d intelliWindow-symbol" href="#num_line" data-definition-place="defined-in-file">num_line</a>):
<a class="l" name="133" href="#133">133</a>        <a class="xv" name="w"/><a href="/source/s?refs=w" class="xv intelliWindow-symbol" data-definition-place="def">w</a> = <span class="n">0</span>
<a class="l" name="134" href="#134">134</a>        <b>for</b> <a class="d intelliWindow-symbol" href="#char" data-definition-place="defined-in-file">char</a> <b>in</b> <a class="d intelliWindow-symbol" href="#predicts" data-definition-place="defined-in-file">predicts</a>[<a href="/source/s?defs=h" class="intelliWindow-symbol" data-definition-place="undefined-in-file">h</a>]:
<a class="l" name="135" href="#135">135</a>            <span class="c"># print(&quot;w&quot;, w)</span>
<a class="l" name="136" href="#136">136</a>            <a class="xv" name="char_width"/><a href="/source/s?refs=char_width" class="xv intelliWindow-symbol" data-definition-place="def">char_width</a> = <a class="d intelliWindow-symbol" href="#char_dict" data-definition-place="defined-in-file">char_dict</a>[<a class="d intelliWindow-symbol" href="#char" data-definition-place="defined-in-file">char</a>].<a href="/source/s?defs=shape" class="intelliWindow-symbol" data-definition-place="undefined-in-file">shape</a>[<span class="n">1</span>]
<a class="l" name="137" href="#137">137</a>            <a class="xv" name="char_img"/><a href="/source/s?refs=char_img" class="xv intelliWindow-symbol" data-definition-place="def">char_img</a> = <span class="n">255</span> - <a class="d intelliWindow-symbol" href="#char_dict" data-definition-place="defined-in-file">char_dict</a>[<a class="d intelliWindow-symbol" href="#char" data-definition-place="defined-in-file">char</a>].<a href="/source/s?defs=astype" class="intelliWindow-symbol" data-definition-place="undefined-in-file">astype</a>(<a class="d intelliWindow-symbol" href="#np" data-definition-place="defined-in-file">np</a>.<a href="/source/s?defs=uint8" class="intelliWindow-symbol" data-definition-place="undefined-in-file">uint8</a>) * <span class="n">255</span>
<a class="l" name="138" href="#138">138</a>            <a href="/source/s?defs=img_aa" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img_aa</a>[<a href="/source/s?defs=h" class="intelliWindow-symbol" data-definition-place="undefined-in-file">h</a>*<span class="n">18</span>:<a href="/source/s?defs=h" class="intelliWindow-symbol" data-definition-place="undefined-in-file">h</a>*<span class="n">18</span>+<span class="n">16</span>, <a href="/source/s?defs=w" class="intelliWindow-symbol" data-definition-place="undefined-in-file">w</a>:<a href="/source/s?defs=w" class="intelliWindow-symbol" data-definition-place="undefined-in-file">w</a>+<a href="/source/s?defs=char_width" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_width</a>] = <a class="d intelliWindow-symbol" href="#char_img" data-definition-place="defined-in-file">char_img</a>
<a class="l" name="139" href="#139">139</a>            <a href="/source/s?defs=w" class="intelliWindow-symbol" data-definition-place="undefined-in-file">w</a> += <a href="/source/s?defs=char_width" class="intelliWindow-symbol" data-definition-place="undefined-in-file">char_width</a>
<a class="hl" name="140" href="#140">140</a>
<a class="l" name="141" href="#141">141</a>    <a class="xv" name="img_aa"/><a href="/source/s?refs=img_aa" class="xv intelliWindow-symbol" data-definition-place="def">img_aa</a> = <a href="/source/s?defs=Image" class="intelliWindow-symbol" data-definition-place="undefined-in-file">Image</a>.<a href="/source/s?defs=fromarray" class="intelliWindow-symbol" data-definition-place="undefined-in-file">fromarray</a>(<a href="/source/s?defs=img_aa" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img_aa</a>)
<a class="l" name="142" href="#142">142</a>    <a class="xv" name="img_aa"/><a href="/source/s?refs=img_aa" class="xv intelliWindow-symbol" data-definition-place="def">img_aa</a> = <a href="/source/s?defs=img_aa" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img_aa</a>.<a href="/source/s?defs=crop" class="intelliWindow-symbol" data-definition-place="undefined-in-file">crop</a>([<span class="n">0</span>,<a href="/source/s?defs=slide" class="intelliWindow-symbol" data-definition-place="undefined-in-file">slide</a>,<a class="d intelliWindow-symbol" href="#new_width" data-definition-place="defined-in-file">new_width</a>, <a class="d intelliWindow-symbol" href="#new_height" data-definition-place="defined-in-file">new_height</a>+<a href="/source/s?defs=slide" class="intelliWindow-symbol" data-definition-place="undefined-in-file">slide</a>])
<a class="l" name="143" href="#143">143</a>    <a class="xv" name="save_path"/><a href="/source/s?refs=save_path" class="xv intelliWindow-symbol" data-definition-place="def">save_path</a> = <a class="d intelliWindow-symbol" href="#output_dir" data-definition-place="defined-in-file">output_dir</a> + <a href="/source/s?defs=os" class="intelliWindow-symbol" data-definition-place="undefined-in-file">os</a>.<a class="d intelliWindow-symbol" href="#path" data-definition-place="defined-in-file">path</a>.<a href="/source/s?defs=basename" class="intelliWindow-symbol" data-definition-place="undefined-in-file">basename</a>(<a class="d intelliWindow-symbol" href="#image_path" data-definition-place="defined-in-file">image_path</a>)[:-<span class="n">4</span>] + <span class="s">&apos;_&apos;</span>\
<a class="l" name="144" href="#144">144</a>                + <span class="s">&apos;w&apos;</span> + <a href="/source/s?defs=str" class="intelliWindow-symbol" data-definition-place="undefined-in-file">str</a>(<a class="d intelliWindow-symbol" href="#new_width" data-definition-place="defined-in-file">new_width</a>) \
<a class="l" name="145" href="#145">145</a>                + <span class="s">&apos;_slide&apos;</span> + <a href="/source/s?defs=str" class="intelliWindow-symbol" data-definition-place="undefined-in-file">str</a>(<a href="/source/s?defs=slide" class="intelliWindow-symbol" data-definition-place="undefined-in-file">slide</a>) + <span class="s">&apos;.png&apos;</span>
<a class="l" name="146" href="#146">146</a>    <a href="/source/s?defs=img_aa" class="intelliWindow-symbol" data-definition-place="undefined-in-file">img_aa</a>.<a href="/source/s?defs=save" class="intelliWindow-symbol" data-definition-place="undefined-in-file">save</a>(<a class="d intelliWindow-symbol" href="#save_path" data-definition-place="defined-in-file">save_path</a>)
<a class="l" name="147" href="#147">147</a>
<a class="l" name="148" href="#148">148</a>    <a class="xv" name="f"/><a href="/source/s?refs=f" class="xv intelliWindow-symbol" data-definition-place="def">f</a>=<a href="/source/s?defs=open" class="intelliWindow-symbol" data-definition-place="undefined-in-file">open</a>(<a class="d intelliWindow-symbol" href="#save_path" data-definition-place="defined-in-file">save_path</a>[:-<span class="n">4</span>] + <span class="s">&apos;.txt&apos;</span>, <span class="s">&apos;w&apos;</span>)
<a class="l" name="149" href="#149">149</a>    <a class="d intelliWindow-symbol" href="#f" data-definition-place="defined-in-file">f</a>.<a href="/source/s?defs=writelines" class="intelliWindow-symbol" data-definition-place="undefined-in-file">writelines</a>(<a class="d intelliWindow-symbol" href="#text" data-definition-place="defined-in-file">text</a>)
<a class="hl" name="150" href="#150">150</a>    <a class="d intelliWindow-symbol" href="#f" data-definition-place="defined-in-file">f</a>.<a href="/source/s?defs=close" class="intelliWindow-symbol" data-definition-place="undefined-in-file">close</a>()
<a class="l" name="151" href="#151">151</a><b>print</b>(<span class="s">&apos;<a href="http://example.com?a=">http://example.com?a=</a>&apos;</span>)
<a class="l" name="152" href="#152">152</a><b>print</b>(<span class="s">&apos;&apos;&apos;<a href="http://example.com?a=&apos;b&apos;&amp;">http://example.com?a=&apos;b&apos;&amp;</a>&apos;&apos;&apos;</span>)
<a class="l" name="153" href="#153">153</a></body>
</html>
